# l7 zero trust - Environment Configuration
# Kopieren Sie diese Datei zu .env und passen Sie die Werte an

# ============================================================================
# Domain Configuration
# ============================================================================
L7_DOMAIN=zerotrust.layer7.de
L7_ADMIN_EMAIL=admin@layer7.de

# ============================================================================
# Authentication (OIDC/OAuth2)
# ============================================================================
# layer7 Keycloak (Production)
L7_OIDC_ENDPOINT=https://id.l7cloud.io/realms/layer7.ch/.well-known/openid-configuration

# Alternative Auth-Provider:
# Authentik: https://auth.layer7.de/application/o/l7-zerotrust/.well-known/openid-configuration
# Zitadel: https://zitadel.layer7.de/.well-known/openid-configuration
L7_AUTH_CLIENT_ID=l7-zerotrust-client
L7_AUTH_CLIENT_SECRET=changeme-secret
L7_AUTH_AUDIENCE=l7-zerotrust-api

# ============================================================================
# Database Configuration
# ============================================================================
L7_DB_PASSWORD=changeme-strong-password
L7_DB_HOST=postgres
L7_DB_PORT=5432
L7_DB_NAME=l7_zerotrust
L7_DB_USER=l7admin

# ============================================================================
# TURN/STUN Configuration
# ============================================================================
L7_TURN_USER=l7turn
L7_TURN_PASSWORD=changeme-turn-password
L7_TURN_REALM=layer7.de
L7_STUN_PORT=3478
L7_TURN_MIN_PORT=49152
L7_TURN_MAX_PORT=65535

# ============================================================================
# Management Server Configuration
# ============================================================================
L7_MGMT_API_PORT=33074
L7_MGMT_GRPC_PORT=33073
L7_MGMT_DATA_DIR=/var/lib/netbird

# ============================================================================
# Signal Server Configuration
# ============================================================================
L7_SIGNAL_PORT=10000
L7_SIGNAL_PROTOCOL=grpc

# ============================================================================
# Dashboard Configuration
# ============================================================================
L7_DASHBOARD_HTTP_PORT=80
L7_DASHBOARD_HTTPS_PORT=443

# ============================================================================
# SSL/TLS Configuration
# ============================================================================
# Let's Encrypt (automatische SSL-Zertifikate)
L7_LETSENCRYPT_EMAIL=${L7_ADMIN_EMAIL}
L7_LETSENCRYPT_STAGING=false

# Oder eigene Zertifikate
# L7_SSL_CERT_PATH=/etc/ssl/certs/layer7.crt
# L7_SSL_KEY_PATH=/etc/ssl/private/layer7.key

# ============================================================================
# Update Server Configuration
# ============================================================================
L7_UPDATE_SERVER_ENABLED=true
L7_UPDATE_SERVER_PORT=8000
L7_UPDATE_SERVER_URL=https://updates.layer7.de

# ============================================================================
# Logging & Monitoring
# ============================================================================
L7_LOG_LEVEL=info  # debug, info, warn, error
L7_LOG_FORMAT=json
L7_METRICS_ENABLED=true
L7_METRICS_PORT=9090

# ============================================================================
# Network Configuration
# ============================================================================
L7_NETWORK_CIDR=100.64.0.0/10
L7_DNS_DOMAIN=l7.local

# ============================================================================
# Feature Flags
# ============================================================================
L7_ENABLE_ROSENPASS=true
L7_ENABLE_SSH_SERVER=true
L7_ENABLE_LAZY_CONNECTION=true
L7_BLOCK_INBOUND=false

# ============================================================================
# Storage Configuration
# ============================================================================
L7_BACKUP_ENABLED=true
L7_BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
L7_BACKUP_RETENTION_DAYS=30

# ============================================================================
# Security
# ============================================================================
# Secret Key f√ºr Session-Management (generieren mit: openssl rand -hex 32)
L7_SECRET_KEY=changeme-generate-random-secret-key

# JWT Token Settings
L7_JWT_EXPIRY=168h  # 1 week
L7_JWT_REFRESH_EXPIRY=720h  # 30 days

# ============================================================================
# Rate Limiting
# ============================================================================
L7_RATE_LIMIT_ENABLED=true
L7_RATE_LIMIT_REQUESTS=100
L7_RATE_LIMIT_WINDOW=1m

# ============================================================================
# Notifications
# ============================================================================
L7_SMTP_HOST=smtp.layer7.de
L7_SMTP_PORT=587
L7_SMTP_USER=notifications@layer7.de
L7_SMTP_PASSWORD=changeme-smtp-password
L7_SMTP_FROM=l7 zero trust <zerotrust@layer7.de>

# ============================================================================
# Development/Testing
# ============================================================================
L7_DEV_MODE=false
L7_DEBUG=false
L7_SKIP_CERT_VERIFICATION=false

# ============================================================================
# Custom Branding
# ============================================================================
L7_PRODUCT_NAME="l7 zero trust"
L7_COMPANY_NAME="layer7 managed it"
L7_PRIMARY_COLOR=#a0cf4f
L7_SUPPORT_EMAIL=support@layer7.de
L7_SUPPORT_PHONE=+49-123-456789

# ============================================================================
# Traefik Configuration (wenn verwendet)
# ============================================================================
TRAEFIK_DASHBOARD_ENABLED=true
TRAEFIK_DASHBOARD_PORT=8081
TRAEFIK_DASHBOARD_USER=admin
TRAEFIK_DASHBOARD_PASSWORD=changeme-traefik-password